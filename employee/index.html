<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Portal Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- <script src="script.js"></script> -->
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="profile-header">
                <div class="profile-card">
                    <div class="profile-info">
                        <div class="avatar"> 
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuLFrdn3_pbAleRLNeGp6dtB40ZLWockzpUb83vkR7oltHTkgSgifmbCP5L2yOtTk_UIg&usqp=CAU" 
                            alt="Profile Picture" class="profile-picture">
                        </div>
                        <div>
                            <h3 class="employee-name">Mike Ross</h3>
                            <p class="employee-role">Senior Developer</p>
                        </div>
                    </div>
                </div>
            </div>

            <nav class="main-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <button class="nav-btn active" data-section="dashboard">
                            <i class="fas fa-home nav-icon"></i> Dashboard
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" data-section="tasks">
                            <i class="fas fa-tasks nav-icon"></i> My Tasks
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" data-section="settings">
                            <i class="fas fa-cog nav-icon"></i> Settings
                        </button>
                    </li>
                </ul>
            </nav>

            <div class="theme-controls">
                <button id="theme-toggle" class="theme-btn">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <h1 class="page-title">Employee Dashboard</h1>

                <!-- Upcoming Tasks Card -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-calendar-alt header-icon"></i>
                        <h2>Upcoming Tasks</h2>
                    </div>
                    <div class="task-list">
                        <div class="task-item">
                            <div class="task-info">
                                <h3 class="task-title">Complete user authentication</h3>
                                <p class="task-due">Due: Today</p>
                            </div>
                            <select class="status-select">
                                <option>To Do</option>
                                <option selected>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                        <div class="task-item">
                            <div class="task-info">
                                <h3 class="task-title">Fix login page bugs</h3>
                                <p class="task-due">Due: Tomorrow</p>
                            </div>
                            <select class="status-select">
                                <option selected>To Do</option>
                                <option>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Recent Updates Card -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-sync-alt header-icon"></i>
                        <h2>Recently Updated</h2>
                    </div>
                    <div class="update-list">
                        <div class="update-item">
                            <div class="update-info">
                                <h3 class="update-title">API documentation</h3>
                                <p class="update-time">Updated: 2 hours ago</p>
                                <p class="update-comment">
                                    <i class="fas fa-comment comment-icon"></i>
                                    "Please add examples" - Team Lead
                                </p>
                            </div>
                            <span class="status-badge done">Done</span>
                        </div>
                    </div>
                </div>

                <!-- Announcements Card -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-bullhorn header-icon"></i>
                        <h2>Announcements</h2>
                    </div>
                    <div class="announcement-list">
                        <div class="announcement-item">
                            <h3 class="announcement-title">Team Meeting Tomorrow</h3>
                            <p class="announcement-text">Please prepare your weekly updates for the 10 AM meeting</p>
                            <p class="announcement-meta">From: Manager</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section id="tasks" class="content-section">
                <div class="tasks-header">
                    <h1 class="page-title">My Tasks</h1>
                    <div class="view-controls">
                        <div class="view-toggle">
                            <button class="view-option active" data-view="list">
                                <i class="fas fa-list"></i> List
                            </button>
                            <button class="view-option" data-view="kanban">
                                <i class="fas fa-columns"></i> Kanban
                            </button>
                        </div>
                        <div class="filter-controls">
                            <select class="filter-select" id="status-filter">
                                <option value="all">All Statuses</option>
                                <option value="todo">To Do</option>
                                <option value="progress">In Progress</option>
                                <option value="review">In Review</option>
                                <option value="done">Done</option>
                            </select>
                            <select class="filter-select" id="priority-filter">
                                <option value="all">All Priorities</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Task List View -->
                <div class="task-list-view active-view">
                    <div class="task-list">
                        <!-- Task 1 -->
                        <div class="task-card">
                            <div class="task-header">
                                <h3 class="task-title">Implement user profile page</h3>
                                <select class="status-select" onchange="updateTaskStatus(this)">
                                    <option value="todo">To Do</option>
                                    <option value="progress" selected>In Progress</option>
                                    <option value="review">In Review</option>
                                    <option value="done">Done</option>
                                </select>
                            </div>
                            <div class="task-meta">
                                <span class="meta-item"><i class="far fa-calendar-alt"></i> Due: May 15</span>
                                <span class="meta-item priority-high"><i class="fas fa-flag"></i> High Priority</span>
                            </div>
                            <p class="task-description">Create the responsive profile page with all user information
                                sections.</p>

                            <div class="attachments">
                                <h4 class="attachments-title"><i class="fas fa-paperclip"></i> Attachments</h4>
                                <div class="attachment-item">
                                    <i class="fas fa-file-pdf attachment-icon"></i>
                                    <span>design-specs.pdf</span>
                                    <a href="#" class="download-btn"><i class="fas fa-download"></i></a>
                                </div>
                            </div>

                            <div class="comments-section">
                                <h4 class="comments-title"><i class="far fa-comments"></i> Comments (2)</h4>
                                <div class="comment">
                                    <div class="comment-header">
                                        <span class="comment-author">Team Lead</span>
                                        <span class="comment-time">May 10, 10:30 AM</span>
                                    </div>
                                    <p class="comment-text">Please make sure to include the social media links section.
                                    </p>
                                </div>
                                <textarea class="comment-input" placeholder="Add a comment..."></textarea>
                                <button class="btn post-comment-btn">Post Comment</button>
                            </div>
                        </div>

                        <!-- Task 2 -->
                        <div class="task-card">
                            <div class="task-header">
                                <h3 class="task-title">Fix login page validation</h3>
                                <select class="status-select" onchange="updateTaskStatus(this)">
                                    <option value="todo" selected>To Do</option>
                                    <option value="progress">In Progress</option>
                                    <option value="review">In Review</option>
                                    <option value="done">Done</option>
                                </select>
                            </div>
                            <div class="task-meta">
                                <span class="meta-item"><i class="far fa-calendar-alt"></i> Due: May 18</span>
                                <span class="meta-item priority-medium"><i class="fas fa-flag"></i> Medium
                                    Priority</span>
                            </div>
                            <p class="task-description">Address the validation issues reported in ticket #1234.</p>

                            <div class="comments-section">
                                <h4 class="comments-title"><i class="far fa-comments"></i> Comments (0)</h4>
                                <textarea class="comment-input" placeholder="Add a comment..."></textarea>
                                <button class="btn post-comment-btn">Post Comment</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Kanban View -->
                <div class="kanban-view">
                    <div class="kanban-board">
                        <div class="kanban-column" id="todo-column" ondrop="drop(event)" ondragover="allowDrop(event)">
                            <div class="column-header">
                                <h4>To Do <span class="column-count">1</span></h4>
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="kanban-card" draggable="true" ondragstart="drag(event)" id="task1">
                                <div class="kanban-card-title">Fix login page validation</div>
                                <div class="kanban-card-meta">
                                    <span><i class="far fa-calendar-alt"></i> May 18</span>
                                    <span class="priority-medium"><i class="fas fa-flag"></i> Medium</span>
                                </div>
                                <p class="kanban-card-description">Address the validation issues reported in ticket
                                    #1234.</p>
                                <div class="kanban-card-footer">
                                    <span><i class="fas fa-paperclip"></i> 0</span>
                                    <span><i class="far fa-comment"></i> 0</span>
                                </div>
                            </div>
                        </div>

                        <div class="kanban-column" id="progress-column" ondrop="drop(event)"
                            ondragover="allowDrop(event)">
                            <div class="column-header">
                                <h4>In Progress <span class="column-count">1</span></h4>
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="kanban-card" draggable="true" ondragstart="drag(event)" id="task2">
                                <div class="kanban-card-title">Implement user profile page</div>
                                <div class="kanban-card-meta">
                                    <span><i class="far fa-calendar-alt"></i> May 15</span>
                                    <span class="priority-high"><i class="fas fa-flag"></i> High</span>
                                </div>
                                <p class="kanban-card-description">Create the responsive profile page with all user
                                    information sections.</p>
                                <div class="kanban-card-footer">
                                    <span><i class="fas fa-paperclip"></i> 1</span>
                                    <span><i class="far fa-comment"></i> 2</span>
                                </div>
                            </div>
                        </div>

                        <div class="kanban-column" id="review-column" ondrop="drop(event)"
                            ondragover="allowDrop(event)">
                            <div class="column-header">
                                <h4>In Review <span class="column-count">0</span></h4>
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="empty-state">
                                <i class="far fa-smile"></i>
                                <p>No tasks in review</p>
                            </div>
                        </div>

                        <div class="kanban-column" id="done-column" ondrop="drop(event)" ondragover="allowDrop(event)">
                            <div class="column-header">
                                <h4>Done <span class="column-count">1</span></h4>
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="kanban-card">
                                <div class="kanban-card-title">Update API documentation</div>
                                <div class="kanban-card-meta">
                                    <span><i class="far fa-calendar-alt"></i> May 10</span>
                                    <span class="priority-low"><i class="fas fa-flag"></i> Low</span>
                                </div>
                                <p class="kanban-card-description">Add examples for all endpoint responses.</p>
                                <div class="kanban-card-footer">
                                    <span><i class="fas fa-paperclip"></i> 1</span>
                                    <span><i class="far fa-comment"></i> 3</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <h1 class="page-title">Settings</h1>
                <div class="settings-container">
                    <!-- Settings Sidebar -->
                    <div class="settings-sidebar">
                        <ul class="settings-menu">
                            <li class="menu-item active" data-section="profile">
                                <i class="fas fa-user"></i> Profile
                            </li>
                            <li class="menu-item" data-section="account">
                                <i class="fas fa-lock"></i> Account
                            </li>
                            <li class="menu-item" data-section="appearance">
                                <i class="fas fa-palette"></i> Appearance
                            </li>
                            <li class="menu-item" data-section="notifications">
                                <i class="fas fa-bell"></i> Notifications
                            </li>
                        </ul>
                    </div>

                    <!-- Settings Content -->
                    <div class="settings-content">
                        <!-- Profile Section -->
                        <div class="settings-section active" id="profile-section">
                            <h2 class="section-title">Profile Information</h2>
                            <div class="profile-picture-container">
                                <div class="profile-picture">
                                    <span> <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuLFrdn3_pbAleRLNeGp6dtB40ZLWockzpUb83vkR7oltHTkgSgifmbCP5L2yOtTk_UIg&usqp=CAUhttps://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuLFrdn3_pbAleRLNeGp6dtB40ZLWockzpUb83vkR7oltHTkgSgifmbCP5L2yOtTk_UIg&usqp=CAU" alt="profile-dp"></span>
                                </div>
                                <div>
                                    <label class="btn upload-btn">
                                        Change Photo
                                        <input type="file" accept="image/*" hidden>
                                    </label>
                                    <p class="upload-hint">JPG, GIF or PNG. Max size 2MB</p>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" value="Mike Ross" disabled>
                            </div>

                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" value="Ross.doe@company.com" disabled>
                            </div>

                            <div class="form-group">
                                <label>Position</label>
                                <input type="text" value="Frontend Developer" disabled>
                            </div>

                            <div class="form-group">
                                <label>Department</label>
                                <input type="text" value="Product Development" disabled>
                            </div>

                            <div class="form-group">
                                <label>About</label>
                                <textarea>Frontend developer specializing in Vue.js and responsive design</textarea>
                            </div>

                            <button class="btn btn-primary">Update Profile</button>
                        </div>

                        <!-- Account Section -->
                        <div class="settings-section" id="account-section">
                            <h2 class="section-title">Account Settings</h2>

                            <div class="form-group">
                                <label>Current Password</label>
                                <input type="password" placeholder="Enter current password">
                            </div>

                            <div class="form-group">
                                <label>New Password</label>
                                <input type="password" placeholder="Enter new password">
                            </div>

                            <div class="form-group">
                                <label>Confirm New Password</label>
                                <input type="password" placeholder="Confirm new password">
                            </div>

                            <button class="btn btn-primary">Change Password</button>

                            <div class="danger-zone">
                                <h3>Danger Zone</h3>
                                <p>These actions are irreversible. Proceed with caution.</p>
                                <button class="btn btn-danger">Deactivate Account</button>
                            </div>
                        </div>

                        <!-- Appearance Section -->
                        <div class="settings-section" id="appearance-section">
                            <h2 class="section-title">Appearance</h2>

                            <div class="form-group">
                                <label>Theme Preference</label>
                                <div class="theme-options">
                                    <div class="theme-option theme-light active" data-theme="light">
                                        <div class="theme-preview"></div>
                                        Light Mode
                                    </div>
                                    <div class="theme-option theme-dark" data-theme="dark">
                                        <div class="theme-preview"></div>
                                        Dark Mode
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Layout Density</label>
                                <select>
                                    <option>Compact</option>
                                    <option selected>Normal</option>
                                    <option>Spacious</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Default View</label>
                                <select>
                                    <option>List View</option>
                                    <option selected>Kanban View</option>
                                </select>
                            </div>

                            <button class="btn btn-primary">Save Preferences</button>
                        </div>

                        <!-- Notifications Section -->
                        <div class="settings-section" id="notifications-section">
                            <h2 class="section-title">Notification Preferences</h2>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked>
                                    Email Notifications
                                    <span class="checkmark"></span>
                                </label>
                                <p class="hint">Receive important updates via email</p>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked>
                                    Push Notifications
                                    <span class="checkmark"></span>
                                </label>
                                <p class="hint">Get real-time updates in your browser</p>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox">
                                    Sound Alerts
                                    <span class="checkmark"></span>
                                </label>
                                <p class="hint">Play sound for new notifications</p>
                            </div>

                            <h3 class="subsection-title">Notification Types</h3>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked>
                                    Task Assignments
                                    <span class="checkmark"></span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked>
                                    Deadline Reminders
                                    <span class="checkmark"></span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox">
                                    Mentions in Comments
                                    <span class="checkmark"></span>
                                </label>
                            </div>

                            <button class="btn btn-primary">Update Preferences</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Right Panel -->
        <div class="right-panel">
            <!-- Notifications Card -->
            <div class="notifications-card card">
                <div class="panel-header">
                    <div class="header-title">
                        <i class="fas fa-bell icon-accent"></i>
                        <h3>Notifications</h3>
                    </div>
                    <button class="btn-text mark-read-btn">Mark all as read</button>
                </div>

                <div class="notification-list">
                    <div class="notification-item unread">
                        <div class="notification-icon">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="notification-content">
                            <p class="notification-message">New task assigned: "Fix header alignment"</p>
                            <p class="notification-time">2 minutes ago</p>
                        </div>
                        <div class="notification-status"></div>
                    </div>

                    <div class="notification-item">
                        <div class="notification-icon">
                            <i class="fas fa-comment"></i>
                        </div>
                        <div class="notification-content">
                            <p class="notification-message">You were mentioned in a comment</p>
                            <p class="notification-time">1 hour ago</p>
                        </div>
                        <div class="notification-status"></div>
                    </div>
                </div>
            </div>

            <!-- Chat Panel -->
            <div class="chat-card card">
                <div class="chat-tabs">
                    <button class="chat-tab active" data-tab="team">Team Chat</button>
                    <button class="chat-tab" data-tab="direct">Direct Messages</button>
                    <button class="chat-back-btn hidden">&lt; Back</button>
                </div>

                <!-- Contacts List -->
                <div class="contacts-list hidden">
                    <div class="contact-category">
                        <h4>Team Leads</h4>
                        <div class="contact-item" data-user="sarah">
                            <div class="contact-avatar" style="background: #6c5ce7;"></div>
                            <div class="contact-info">
                                <span class="contact-name">Sarah Johnson</span>
                                <span class="contact-role">Tech Lead</span>
                            </div>
                        </div>
                    </div>

                    <div class="contact-category">
                        <h4>Team Members</h4>
                        <div class="contact-item" data-user="mike">
                            <div class="contact-avatar" style="background: #00b894;"></div>
                            <div class="contact-info">
                                <span class="contact-name">Mike Chen</span>
                                <span class="contact-role">Frontend Developer</span>
                            </div>
                        </div>
                        <div class="contact-item" data-user="emma">
                            <div class="contact-avatar" style="background: #d63031;"></div>
                            <div class="contact-info">
                                <span class="contact-name">Emma Wilson</span>
                                <span class="contact-role">UX Designer</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Team Chat -->
                <div class="chat-container team-chat active-chat">
                    <div class="chat-messages">
                        <div class="message incoming">
                            <div class="message-header">
                                <span class="message-sender">Sarah Johnson</span>
                                <span class="message-time">10:00 AM</span>
                            </div>
                            <p class="message-text">Good morning team! Let's start with daily updates.</p>
                        </div>

                        <div class="message outgoing">
                            <div class="message-header">
                                <span class="message-time">10:02 AM</span>
                            </div>
                            <p class="message-text">Working on the new profile page implementation.</p>
                        </div>

                        <div class="message incoming">
                            <div class="message-header">
                                <span class="message-sender">Mike Chen</span>
                                <span class="message-time">10:05 AM</span>
                            </div>
                            <p class="message-text">Need help with the login validation API.</p>
                        </div>
                    </div>

                    <div class="chat-input">
                        <input type="text" class="message-input" placeholder="Type team message...">
                        <button class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <!-- Direct Chat - Sarah -->
                <div class="chat-container direct-chat hidden" id="sarah">
                    <div class="chat-header">
                        <div class="contact-info">
                            <div class="contact-avatar" style="background: #6c5ce7;"></div>
                            <div>
                                <h4>Sarah Johnson</h4>
                                <p class="contact-role">Tech Lead</p>
                            </div>
                        </div>
                    </div>
                    <div class="chat-messages">
                        <div class="message incoming">
                            <div class="message-header">
                                <span class="message-time">Yesterday 3:45 PM</span>
                            </div>
                            <p class="message-text">Can you review the PR for the dashboard updates?</p>
                        </div>

                        <div class="message outgoing">
                            <div class="message-header">
                                <span class="message-time">Yesterday 4:10 PM</span>
                            </div>
                            <p class="message-text">Sure, I'll review it by EOD.</p>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" class="message-input" placeholder="Message Sarah...">
                        <button class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <!-- Direct Chat - Mike -->
                <div class="chat-container direct-chat hidden" id="mike">
                    <div class="chat-header">
                        <div class="contact-info">
                            <div class="contact-avatar" style="background: #00b894;"></div>
                            <div>
                                <h4>Mike Chen</h4>
                                <p class="contact-role">Frontend Developer</p>
                            </div>
                        </div>
                    </div>
                    <div class="chat-messages">
                        <div class="message incoming">
                            <div class="message-header">
                                <span class="message-time">Today 9:15 AM</span>
                            </div>
                            <p class="message-text">Can you check the login validation logic?</p>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" class="message-input" placeholder="Message Mike...">
                        <button class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <!-- Direct Chat - Emma -->
                <div class="chat-container direct-chat hidden" id="emma">
                    <div class="chat-header">
                        <div class="contact-info">
                            <div class="contact-avatar" style="background: #d63031;"></div>
                            <div>
                                <h4>Emma Wilson</h4>
                                <p class="contact-role">UX Designer</p>
                            </div>
                        </div>
                    </div>
                    <div class="chat-messages">
                        <div class="message incoming">
                            <div class="message-header">
                                <span class="message-time">Monday 2:30 PM</span>
                            </div>
                            <p class="message-text">Need your feedback on the new dashboard mockups.</p>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" class="message-input" placeholder="Message Emma...">
                        <button class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme Management
        const themeToggle = document.getElementById('theme-toggle');
        let currentTheme = localStorage.getItem('theme') || 'light';

        function applyTheme() {
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
            themeToggle.innerHTML = currentTheme === 'dark'
                ? '<i class="fas fa-sun"></i> Light Mode'
                : '<i class="fas fa-moon"></i> Dark Mode';
        }

        themeToggle.addEventListener('click', () => {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme();
        });

        // Updated Navigation System
        document.addEventListener('DOMContentLoaded', () => {
            const appContainer = document.querySelector('.app-container');
            const navButtons = document.querySelectorAll('.nav-btn');
            const contentSections = document.querySelectorAll('.content-section');

            function handleNavigation(sectionId) {
                // Update app container class
                appContainer.classList.toggle('dashboard-active', sectionId === 'dashboard');

                // Update navigation states
                navButtons.forEach(btn => btn.classList.remove('active'));
                contentSections.forEach(section => section.classList.remove('active'));

                const targetBtn = document.querySelector(`.nav-btn[data-section="${sectionId}"]`);
                const targetSection = document.getElementById(sectionId);

                if (targetBtn && targetSection) {
                    targetBtn.classList.add('active');
                    targetSection.classList.add('active');
                }

                localStorage.setItem('activeSection', sectionId);
            }

            navButtons.forEach(button => {
                button.addEventListener('click', () => handleNavigation(button.dataset.section));
            });

            // Initialize
            const storedSection = localStorage.getItem('activeSection') || 'dashboard';
            handleNavigation(storedSection);
        });

        // View Toggle Functionality (Revised)
        document.querySelectorAll('.view-option').forEach(option => {
            option.addEventListener('click', function () {
                // Remove active classes
                document.querySelectorAll('.view-option').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.task-list-view, .kanban-view').forEach(view => {
                    view.classList.remove('active-view');
                });

                // Set new active states
                this.classList.add('active');
                const viewType = this.dataset.view;
                const targetView = document.querySelector(`.${viewType}-view`);
                targetView.classList.add('active-view');

                // Update kanban counts if needed
                if (viewType === 'kanban') updateTaskCounts();

                // Force layout refresh
                void targetView.offsetWidth;
            });
        });
        // Kanban Drag & Drop
        let draggedItem = null;

        document.querySelectorAll('.kanban-card').forEach(item => {
            item.addEventListener('dragstart', () => {
                draggedItem = item;
                setTimeout(() => item.style.opacity = '0.5', 0);
            });

            item.addEventListener('dragend', () => {
                setTimeout(() => {
                    draggedItem.style.opacity = '1';
                    draggedItem = null;
                }, 0);
            });
        });

        document.querySelectorAll('.kanban-column').forEach(column => {
            column.addEventListener('dragover', e => e.preventDefault());
            column.addEventListener('dragenter', e => e.preventDefault());

            column.addEventListener('drop', e => {
                e.preventDefault();
                if (draggedItem) {
                    column.appendChild(draggedItem);
                    updateTaskCounts();
                }
            });
        });

        function updateTaskCounts() {
            document.querySelectorAll('.kanban-column').forEach(column => {
                const count = column.querySelectorAll('.kanban-card').length;
                column.querySelector('.column-count').textContent = count;
            });
        }

        // Settings Page Functionality
        const settingsMenuItems = document.querySelectorAll('.settings-menu .menu-item');
        const settingsSections = document.querySelectorAll('.settings-section');

        settingsMenuItems.forEach(item => {
            item.addEventListener('click', function () {
                settingsMenuItems.forEach(i => i.classList.remove('active'));
                settingsSections.forEach(s => s.classList.remove('active'));

                this.classList.add('active');
                document.getElementById(`${this.dataset.section}-section`).classList.add('active');
            });
        });

        // Profile Picture Upload
        function previewProfilePicture(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                const profilePic = document.querySelector('.profile-picture');

                reader.onload = function (e) {
                    profilePic.innerHTML = `<img src="${e.target.result}" alt="Profile">`;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Form Submissions
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', e => {
                e.preventDefault();
                // Add actual form submission logic here
                showToast('Settings saved successfully!');
            });
        });

        // Notification System
        document.querySelector('.mark-read-btn').addEventListener('click', () => {
            document.querySelectorAll('.notification-item').forEach(item => {
                item.classList.remove('unread');
            });
        });

        // Chat Tab Functionality
        let currentChat = 'team';
        let currentDirectUser = null;

        document.querySelectorAll('.chat-tab').forEach(tab => {
            tab.addEventListener('click', function () {
                const tabType = this.dataset.tab;
                document.querySelectorAll('.chat-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                if (tabType === 'direct') {
                    document.querySelector('.contacts-list').classList.remove('hidden');
                    document.querySelector('.chat-container').classList.add('hidden');
                    document.querySelector('.chat-back-btn').classList.remove('hidden');
                    currentChat = 'direct-list';
                } else {
                    showChat('team');
                }
            });
        });

        // Contact Selection
        document.querySelectorAll('.contact-item').forEach(contact => {
            contact.addEventListener('click', function () {
                const userId = this.dataset.user;
                currentDirectUser = userId;
                showDirectChat(userId);
            });
        });

        // Back Button
        document.querySelector('.chat-back-btn').addEventListener('click', () => {
            if (currentDirectUser) {
                showChat('direct-list');
            } else {
                showChat('team');
            }
        });

        function showChat(type) {
            document.querySelectorAll('.chat-container').forEach(c => c.classList.add('hidden'));
            document.querySelector('.contacts-list').classList.add('hidden');
            document.querySelector('.chat-back-btn').classList.add('hidden');

            if (type === 'team') {
                document.querySelector('.team-chat').classList.remove('hidden');
                currentChat = 'team';
                currentDirectUser = null;
            } else if (type === 'direct-list') {
                document.querySelector('.contacts-list').classList.remove('hidden');
                document.querySelector('.chat-back-btn').classList.remove('hidden');
                currentChat = 'direct-list';
                currentDirectUser = null;
            } else if (currentDirectUser) {
                document.querySelector(`#${currentDirectUser}`).classList.remove('hidden');
                document.querySelector('.chat-back-btn').classList.remove('hidden');
            }
        }

        function showDirectChat(userId) {
            document.querySelectorAll('.chat-container').forEach(c => c.classList.add('hidden'));
            document.querySelector(`#${userId}`).classList.remove('hidden');
            document.querySelector('.chat-back-btn').classList.remove('hidden');
            currentChat = 'direct';
            currentDirectUser = userId;
        }

        // Modified Send Message Function
        function sendMessage() {
            const input = document.querySelector('.message-input');
            const message = input.value.trim();

            if (message) {
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const container = currentChat === 'team' ?
                    document.querySelector('.team-chat .chat-messages') :
                    document.querySelector(`#${currentDirectUser} .chat-messages`);

                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${currentChat === 'team' ? 'outgoing' : 'outgoing'}`;
                messageDiv.innerHTML = `
            <div class="message-header">
                <span class="message-time">${time}</span>
            </div>
            <p class="message-text">${message}</p>
        `;

                container.appendChild(messageDiv);
                input.value = '';
                container.scrollTop = container.scrollHeight;
            }
        }



        // Toast Notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => toast.remove(), 3000);
        }

        // Initialize
        applyTheme();
        updateTaskCounts();
        document.querySelector('.nav-btn[data-section="dashboard"]').click();

        // Task Status Updates
        function updateTaskStatus(selectElement) {
            const taskCard = selectElement.closest('.task-card');
            const newStatus = selectElement.value;

            // Update UI
            taskCard.dataset.status = newStatus;

            // For Kanban view updates
            const taskId = taskCard.id;
            const kanbanCard = document.getElementById(taskId);
            if (kanbanCard) {
                const targetColumn = document.getElementById(`${newStatus}-column`);
                targetColumn.appendChild(kanbanCard);
                updateTaskCounts();
            }
        }

        // Drag and Drop Functions
        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('drop-zone');
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.target.classList.add('dragging');
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.getElementById(data);
            const targetColumn = ev.currentTarget;

            draggedElement.classList.remove('dragging');
            targetColumn.appendChild(draggedElement);
            updateTaskCounts();

            // Update status select in list view
            const taskId = draggedElement.id;
            const listViewSelect = document.querySelector(`#${taskId} .status-select`);
            if (listViewSelect) {
                const newStatus = targetColumn.id.replace('-column', '');
                listViewSelect.value = newStatus;
            }
        }

        function updateTaskCounts() {
            document.querySelectorAll('.kanban-column').forEach(column => {
                const count = column.querySelectorAll('.kanban-card').length;
                column.querySelector('.column-count').textContent = count;
            });
        }

        // View Toggle
        document.querySelectorAll('.view-option').forEach(option => {
            option.addEventListener('click', function () {
                document.querySelectorAll('.view-option').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');

                document.querySelectorAll('.task-list-view, .kanban-view').forEach(view => {
                    view.style.display = 'none';
                });

                const viewType = this.dataset.view;
                document.querySelector(`.${viewType}-view`).style.display = viewType === 'list' ? 'block' : 'grid';
            });
        });

        // Initialize Task Counts
        updateTaskCounts();

        // Notification functionality
        document.querySelector('.mark-read-btn').addEventListener('click', () => {
            document.querySelectorAll('.notification-item').forEach(item => {
                item.classList.remove('unread');
                item.querySelector('.notification-status').style.opacity = '0';
            });
        });

        // Chat functionality
        document.querySelector('.send-btn').addEventListener('click', sendMessage);
        document.querySelector('.message-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        function sendMessage() {
            const input = document.querySelector('.message-input');
            const message = input.value.trim();

            if (message) {
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const messagesContainer = document.querySelector('.chat-messages');

                const messageDiv = document.createElement('div');
                messageDiv.className = 'message outgoing';
                messageDiv.innerHTML = `
            <div class="message-header">
                <span class="message-time">${time}</span>
            </div>
            <p class="message-text">${message}</p>
        `;

                messagesContainer.appendChild(messageDiv);
                input.value = '';
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        // Chat tab switching
        document.querySelectorAll('.chat-tab').forEach(tab => {
            tab.addEventListener('click', function () {
                document.querySelectorAll('.chat-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Settings JavaScript
        // Section Switching
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function () {
                document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                document.querySelectorAll('.settings-section').forEach(s => s.classList.remove('active'));

                this.classList.add('active');
                const sectionId = this.dataset.section + '-section';
                document.getElementById(sectionId).classList.add('active');
            });
        });

        // Theme Selection
        document.querySelectorAll('.theme-option').forEach(option => {
            option.addEventListener('click', function () {
                document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');

                const theme = this.dataset.theme;
                document.body.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            });
        });

        // Profile Picture Upload
        document.querySelector('.upload-btn input[type="file"]').addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                const profilePic = document.querySelector('.profile-picture img');
        
                reader.onload = function (e) {
                    if (profilePic) {
                        profilePic.src = e.target.result; // Replace the existing image source
                    } else {
                        const newImg = document.createElement('img');
                        newImg.src = e.target.result;
                        newImg.alt = "Profile";
                        document.querySelector('.profile-picture').appendChild(newImg);
                    }
                };
                reader.readAsDataURL(file);
            }
        });
        

        // Form Submissions
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function (e) {
                e.preventDefault();
                showToast('Settings saved successfully!');
            });
        });

        // Initialize Theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);
        document.querySelector(`.theme-option[data-theme="${savedTheme}"]`).classList.add('active');

        // Toast Notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('show');
            }, 100);

            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
</body>

</html>